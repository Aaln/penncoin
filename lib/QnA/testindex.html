<html>
<head>
  <title></title>
  <script src="http://localhost:8000/socket.io/socket.io.js"></script>
  <script type="text/javascript" scr="jquery.js"></script>

  <script src="qamodule.js"></script>
  <script type="text/javascript">
    var wisdom = {
      global : {
        userid: "123456",
        confid: "666",
      },

    };

  </script>
</head>
<body>

<script type="text/javascript">

  var samplesocket = io.connect('http://localhost:8000');

  var renderQnA  = function(qDict) {
    
    var qDiv = document.getElementById('questionDiv');

    while (qDiv.hasChildNodes()) {
      qDiv.removeChild(qDiv.lastChild);
    }

    qIDArray = [];
    for(var quest in qDict) {
      qIDArray.push(quest);

    }

    for (var i = 0; i < qIDArray.length; i++) {
      renderQuestion(qDict[qIDArray[i]]);
    };

  }
  
  var renderQuestion = function(question) {
    var divID = "q-" + question.questionID;
    var qDiv = document.getElementById('questionDiv');

    var qnaHTML = '<div class=\"QnAquestion\" id=\"' + divID + '\">' + 
    question.question + 
    '<input type=\"button\" value=\"Upvote\" onClick=\"QnAModule.upVote(\"' + question.qid + ')> </div>' + 
    '<input type=\"button\" value=\"Downvote\" onClick=\"QnAModule.downVote(\"' + question.qid + ')> </div> <div> Number of Upvotes: ' + question.numupvotes + ' </div> <br>';
    
    var newDiv = document.createElement("div");

    newDiv.id =  divID;
    newDiv.innerHTML = qnaHTML;
    qDiv.appendChild(newDiv);

  };

  var proposeQuestion = function(){
        QnAModule.proposeNewQ(document.getElementById('newquestionbox').value);
  };

  var QnAModule = QnA();
  QnAModule.initialize(samplesocket,wisdom.global.userid,wisdom.global.confid,'kamiller',renderQnA);
</script>

  <div id="q1"></div>
  <br>
  <h3>Questions</h3>
  <div id="questionDiv">

  </div>


    <div align="center">
      <br><br>
      <input type="text" id="newquestionbox" size="25" value="Enter your Question here!">
      <br><input type="button" value="Propose Question" onclick='proposeQuestion();'><br>
    </div>
  

</body>
</html>
