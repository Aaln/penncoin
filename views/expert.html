<script src="/socket.io/socket.io.js"></script>
<script src="js/clientside_groupchat.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>

<script>
var socket = io.connect('http://localhost:4000');

socket.on('connectionAlert', function(alertMessage) {
	//var newChat = ChatClient;
	//newChat.init(socket);
		alert(alertMessage);
});
var newChat = ChatClient();
newChat.init(socket);


	$(function(){

		// when the client clicks SEND
		$('#enterchat').click( function() {
			console.log("button pressed");
			var message = $('#chatdata').val();
			$('#chatdata').val('');
			// tell server to execute 'sendchat' and send along one parameter
			newChat.sendMessage(message);
		});

		// when the client hits ENTER on their keyboard
		$('#enterchat').keypress(function(e) {
			if(e.which == 13) {
				$(this).blur();
				$('#chatdata').focus().click();
			}
		});

	});

	newChat.joinChat = function(chatlog) {
		alert('joinChat sucesss! Chatlog is:' + JSON.stringify(chatlog));
		for(var i = 0; i < chatlog.length; i++) {
			$('#conversation').append('<b>'+ chatlog[i].username + ':</b> ' + chatlog[i].messageData + '<br>');
		}
	}
	newChat.displayChat = function(username, message) {
		console.log("displaying chat");
		$('#conversation').append('<b>'+ username + ':</b> ' + message + '<br>');
	}


</script>
<html>
	<head>

		<title>Wastewise</title>

		<style>
			body {
				margin:0;
				padding:0;
			}
			#header {
				width:100%;
				height:50px;
				background-color:green;
			}
			#agenda {
				height:414px;
				width:14.5%;
				border:1px solid black;
				float:left;
			}
			#notes {
				float:left;
				height:414px;
				width:15%;
				border:1px solid black;
			}
			#notes textarea {
				height:300px;
				width:100%;
				resize: none;
			}
			#video {
				width:40%;
				height:415px;
				float:left;
				margin-left:2px;
			}
			#qa {
				width:15%;
				height:414px;
				float:right;
				border:1px solid black;
			}
			#chatroom {
				width:14.5%;
				height:414px;
				float:right;
				border:1px solid black;
			}
			#conversation {
				height:100px;
				overflow:auto;
				border:1px solid black;
			}
			#agenda ul {
				list-style:none;
			}
			.agenda-item {
				width:100px;
				height:50px;
				margin:10px;
				background-color:red;
				color:white;
			}
		</style>
	</head>
	 <script>
  $(function() {
    $( "#tabs" ).tabs();
  });
  </script>

	<body>
		<div id='header'> <%= username %></div>
		<div id='agenda'>
			<h3 id='tabs'><a href="#tabs-1">Agenda</a></h3>
			<ul id="tabs-1">
				<li id='agenda-li1' class='agenda-item'>
					<div id='topic1'>Topic 1</div>
					<input id='et1' />
					<button class='edit'id='edit1'>edit</button>
					<button class='done'>Done</button>
				</li>
				<li id='agenda-li2' class='agenda-item'>
					<div id='topic1'>Topic 2</div>
					<input id='et2' />
					<button class='notDone'>Not Done</button>
					<button class='done'>Done</button>
				</li>
			</ul>
		</div>


		<div id='notes'>
			<h3>Notes</h3>
			<textarea id="notesarea"style='width:100%; height:320px'></textarea>
			<div id='timestamp'></div>
		</div>

		<div id='video'><iframe width="100%" height="100%" src="//www.youtube.com/embed/RAJgGIQ3JHk" frameborder="0" allowfullscreen></iframe></div>

		<div id='qa'>
			<h3>Chatroom</h3>
		</div>

		<div id='chatroom'>
			<h3>Chatroom</h3>
			<input id="chatdata" style="width:100px;" />
			<input type="button" id="enterchat" value="send" />
			<div id="conversation"></div>
			<div id="users"></div>
		</div>

	</div>

	</body>

</html>
